<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>JPG to WebP Converter | webpng</title>
    <link rel="stylesheet" href="styles.css?v=5" />
  </head>
  <body>
    <!-- Header / nav -->
    <header>
      <nav>
        <span class="brand">webpng</span>
        <a class="pill" href="/index.html">Home</a>
        <a class="pill" href="/about.html">About</a>
        <a class="pill" href="/privacy.html">Privacy</a>
        <a class="pill" href="/terms.html">Terms</a>
        <a class="pill" href="/contact.html">Contact</a>
      </nav>
    </header>

    <div class="wrap">
      <h1>JPG to WebP Converter</h1>
      <div class="sub">
        Free, private, in‑browser conversion. Images never leave your device.
      </div>

      <!-- Converter card -->
      <div class="card">
        <input id="file" type="file" accept="image/jpeg" />
        <label style="display: block; margin-top: 10px">
          Quality
          <input
            id="q"
            type="range"
            min="50"
            max="100"
            value="82"
            style="vertical-align: middle; width: 55%; margin: 0 8px"
          />
          <span id="qv">82</span>
        </label>

        <div class="row" style="margin-top: 12px">
          <button class="btn" id="go">Convert</button>
          <a id="dl" class="btn secondary" download="image.webp" hidden
            >Download</a
          >
        </div>

        <p class="note" style="margin-top: 10px">
          All processing happens in your browser. Nothing is uploaded.
        </p>
        <canvas id="c" style="max-width: 100%; display: none"></canvas>
      </div>

      <!-- Info / FAQ card (kept in a white card so it doesn't look like a blue bar) -->
      <div class="card" style="margin-top: 16px">
        <h2 style="margin-top: 0">About JPG → WebP</h2>

        <details open>
          <summary>What is WebP and why convert from JPG?</summary>
          <p>
            WebP is a modern image format from Google that produces high‑quality
            images at much smaller file sizes. Compared to JPG, WebP supports
            both lossy and lossless compression, transparency (alpha), and
            animation. Switching from JPG to WebP reduces bandwidth, improves
            load times, and boosts SEO.
          </p>
        </details>

        <details>
          <summary>When should I use JPG vs WebP?</summary>
          <ul>
            <li><b>Use JPG</b> for legacy systems or maximum compatibility.</li>
            <li>
              <b>Use WebP</b> for modern browsers and apps — smaller files and
              excellent visual quality.
            </li>
          </ul>
        </details>

        <details>
          <summary>Privacy: how are my files handled?</summary>
          <p>
            Everything runs locally in your browser. No uploads, no storage, no
            servers involved.
          </p>
        </details>

        <details>
          <summary>Tips for best results</summary>
          <ul>
            <li>
              Start at quality 90; lower gradually if you need smaller sizes.
            </li>
            <li>
              Keep a backup of your original JPGs — WebP is for delivery, not
              archival editing.
            </li>
          </ul>
        </details>

        <details>
          <summary>FAQ</summary>
          <p>
            <b>Q:</b> Will JPG → WebP lose quality?<br />
            <b>A:</b> At high settings (90+), WebP usually looks identical to
            JPG while reducing file size by 20–40%.
          </p>
          <p>
            <b>Q:</b> Do all browsers support WebP?<br />
            <b>A:</b> Yes — all modern browsers support WebP.
          </p>
        </details>
      </div>

      <!-- Optional: related tools section -->
      <section class="section-tint" style="margin-top: 16px">
        <h2>More image tools</h2>
        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 14px;
          "
        >
          <div class="card tool-card">
            <a href="/png-compress.html">PNG Compressor</a>
            <p class="muted">
              Lossless recompress & strip metadata for smaller PNGs.
            </p>
          </div>
          <div class="card tool-card">
            <a href="/index.html">PNG ↔ WebP</a>
            <p class="muted">
              Bidirectional converter with preview and quality control.
            </p>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="sub" style="margin-top: 18px">
        © <span id="y"></span> webpng · <a href="/privacy.html">Privacy</a> ·
        <a href="/terms.html">Terms</a>
      </footer>
    </div>

    <script>
      document.getElementById("y").textContent = new Date().getFullYear();

      const f = document.getElementById("file");
      const q = document.getElementById("q");
      const qv = document.getElementById("qv");
      const c = document.getElementById("c");
      const ctx = c.getContext("2d");
      const go = document.getElementById("go");
      const dl = document.getElementById("dl");

      q.oninput = () => (qv.textContent = q.value);

      go.onclick = async () => {
        if (!f.files[0]) return alert("Choose a JPG first");

        const img = new Image();
        img.src = URL.createObjectURL(f.files[0]);
        await img.decode();

        c.width = img.naturalWidth;
        c.height = img.naturalHeight;
        c.style.display = "block";
        ctx.drawImage(img, 0, 0);

        const blob = await new Promise((r) =>
          c.toBlob(r, "image/webp", q.value / 100)
        );
        if (!blob) {
          alert("Conversion failed.");
          return;
        }

        dl.href = URL.createObjectURL(blob);
        dl.hidden = false;

        // Reset input after preparing download
        f.value = "";
        // Optional: disable until another file is picked
        // go.disabled = true;
      };
    </script>
  </body>
</html>
